{% extends "admin/base_site.html" %}
{% load admin_list i18n %}
{% load url from future %}

{% block title %}{% trans "Liveblogging administration" %} | {% trans 'Opps site admin' %}{% endblock %}

{% block breadcrumbs %}
<ul class="breadcrumb">
  <li><a href="../../">{% trans "Home" %}</a> </li>
  <li><a href="../">{% trans "Liveblogging" %}</a> </li>
  <li><a href="./">{% trans "Menssages" %}</a> </li>
  <li class="active">{{ context.title }}</li>
</ul>
{% endblock %}

{% block content_title %}
<div class="page-header">
  <h3>{{ context.title }} {% trans "Administration" %}</h3>
</div>
{% endblock %}

{% block extrastyle %}
<style>
#msgs {
  height: 650px;
  padding: 5px;
  overflow: scroll;
}
</style>
{{ block.super }}
{% endblock %}

{% block extrahead %}
<script type="text/javascript">
django.jQuery(document).ready(function(){
  django.jQuery('#btnPost').click(function(){
    if (django.jQuery("#id_message").val() == "") {
      return false;
    }
    django.jQuery.ajax({
      type: "POST",
      data: django.jQuery("form").serialize(),
      success: function (e){
        django.jQuery("#id_message").val("");
        django.jQuery("#id_message").focus();
        django.jQuery("#msgs").append("<p>"+ e +"</p>");
        django.jQuery("#msgs").scrollTop(django.jQuery("#msgs")[0].scrollHeight);
      }
    });
  });
});
</script>
{% endblock %}

{% block content %}
<div id="content-main">
  <form method="post">
    {% csrf_token %}
    <input id="id_message" name="message" class="input-block-level" type="text">
    <button id="btnPost" class="btn btn-primary" type="button">{% trans "Post" %}</button>
  </form>
  <div class="thumbnail" id="msgs">
    {% for m in msg %}
    <p>{{ m.message|safe }}</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
